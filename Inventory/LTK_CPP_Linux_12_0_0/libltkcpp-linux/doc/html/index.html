<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>LTKCPP-- LLRP Toolkit C Plus Plus Library: LLRP Toolkit for C PlusPlus (LTKCPP)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">LTKCPP-- LLRP Toolkit C Plus Plus Library
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="namespaceLLRP.html">LLRP</a> Toolkit for C PlusPlus (LTKCPP) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Gordon Waidhofer</dd></dl>
<p>OVERVIEW OF THE <a class="el" href="namespaceLLRP.html">LLRP</a> Tool Kit for C++ Last updated 28 Jan 2008</p>
<h1>INTRODUCTION </h1>
<p>This is a high level overview of and orientation to the <a class="el" href="namespaceLLRP.html">LLRP</a> Tool Kit for C++ (LTKCPP) on Linux and Windows.</p>
<p>The most recent versions of and news about the <a class="el" href="namespaceLLRP.html">LLRP</a> Tool Kit is available on SourceForge.net </p><pre class="fragment">http://sourceforge.net/projects/llrp-toolkit/
</pre><p>This document is organized: WHAT IT IS &ndash; a summary for an apps programmer HOW IT WORKS &ndash; orientation to the internals LIST OF FILES &ndash; small description of each source file TODO LIST &ndash; what still needs to be done and known problems</p>
<h1>WHAT IT IS </h1>
<p>From the application C++ programmer's view:</p><ul>
<li>There is a C++ class definition for each <a class="el" href="namespaceLLRP.html">LLRP</a> message and parameter type</li>
<li>An application constructs messages as "element trees" of these structures.</li>
<li>Using a transaction layer, an element tree is encoded into a "binary frame" and sent to the <a class="el" href="namespaceLLRP.html">LLRP</a> compatible RFID reader.</li>
<li>Messages from the reader are decoded into element trees.</li>
<li>Applications traverse the element trees to retrieve results and tag data</li>
<li>Applications are responsible to be sure element trees are properly deallocated</li>
</ul>
<h1>HOW IT WORKS </h1>
<p>The LTKCPP library code has two major parts.</p>
<p>The first part is the base types, classes, and subroutines. These are written by hand.</p>
<p>The second part is generated code. The code generators are written in XSLT and process ../Definitions/Core/llrp-1x0-def.xml. For each <a class="el" href="namespaceLLRP.html">LLRP</a> message and parameter type, generated are:</p><ul>
<li>A C++ class</li>
<li>A type descriptor &ndash; name, type number, constructor function pointer, etc.</li>
<li>A set of member functions to encode/decode the classes.</li>
</ul>
<p>The generated encode/decode functions act through an abstract interface. For example, the generated function that encodes an ROBoundarySpec does not know whether the abstract encoder is being used to generate a <a class="el" href="namespaceLLRP.html">LLRP</a> binary frame or XML text.</p>
<p>The model for decode is a little tricky to understand at first:</p><ul>
<li>Identify the message or parameter type.</li>
<li>Look in a type registry to find the type descriptor.</li>
<li>Call the generated decodeFields() function.</li>
<li>The remainder of the message or parameter is considered a sequence of subparameters. Each are decoded by the method described here.</li>
<li>As each subparameter is decoded it is appended to an all-list.</li>
<li>Once all subparameters have been decoded, a generated assimilateSubParameters() function is called to walk the all-list and update the individual struct members.</li>
</ul>
<p>Errors during encode/decode are generally handled by setting values in an error details structure and then terminating. The error details include an error number, a string, and sometimes a reference type descriptor and/or field descriptor. With rare exception, this is enough information for the application programmer to determine what went wrong with the application program.</p>
<h1>LIST OF FILES </h1>
<p>Documentation/ Directory for LTKCPP-specific documentation. Empty at this time.</p>
<p>Examples/ Directory of example applications.</p>
<p>Examples/example1.cpp Implements the "LLRP Hello World" program. It does a five second inventory five times. Requires a <a class="el" href="namespaceLLRP.html">LLRP</a> reader. Runs from the command line (not a GUI).</p>
<p>Examples/Example-Makefile The Makefile that is copied to the example directory of each binary distribution. The copy is named "Makefile" and gets include files and libraries from directory .. (dot-dot, the parent dir).</p>
<p>Examples/Makefile Makefile for the examples.</p>
<p>INSTALL.TXT Terse instructions for obtaining and building LTKCPP</p>
<p>Library/ The principal directory of LTKCPP.</p>
<p>Library/gencode.bat A Windows command script for running the MSXML code generator on windows. This must be run by hand before using Visual Studio to build the library and programs. Requires MSXML.EXE which can be downloaded at no charge from Microsoft.com. There are instructions within this gencode.bat file.</p>
<p>Library/Impinj/ Directory that contains the Impinj extension C++ files. It is combined with ../Definitions/Impinj/*def.xml</p>
<p>Library/Impinj/impinj_ltkcpp_genout.cpp Library/Impinj/impinj_ltkcpp.h Wrappers that combine and condition the generated C++ source and header files for Impinj general extensions like Tag Direction, Search Mode, etc.</p>
<p>Library/Impinj/impinjinternal_ltkcpp_genout.cpp Library/Impinj/impinjinternal_ltkcpp.h Wrappers that combine and condition the generated C++ source and header files for Impinj internal extensions like TCS. These are never release in any form outside of Impinj.</p>
<p>Library/Impinj/Makefile Makefile for Impinj extensions, both general and internal.</p>
<p>Library/LLRP.org/ Directory that contains the LLRP.org extension C++ files. It is combined with ../Definitions/LLRP.org/LLRPOrgExampleDef.xml These extensions don't really do anything, they are just used for testing and to demonstrate how the LTK implementations build extensions.</p>
<p>Library/LLRP.org/llrporg_ltkcpp_genout.cpp Library/LLRP.org/llrporg_ltkcpp.h Wrappers that combine and condition the generated C++ source and header files for LLRP.org extensions.</p>
<p>Library/LLRP.org/Makefile Makefile for LLRP.org extensions.</p>
<p>Library/ltkcpp_array.cpp Helper functions for array types, like utf8v "strings"</p>
<p>Library/ltkcpp_base.h Base classes of LTKCPP, hand coded. Base classes include: Elements &ndash; common between messages and parameters Messages &ndash; base class for <a class="el" href="namespaceLLRP.html">LLRP</a> messages Parameters &ndash; base class for <a class="el" href="namespaceLLRP.html">LLRP</a> parameters TypeDescriptors &ndash; info about element types, eg name, typenum FieldDescriptors &ndash; info about fields within elements NamespaceDescriptors &ndash; info about an XML namespace, eg prefix, URI VendorDescriptors &ndash; info about a vendor, eg name, PEN Decoders &ndash; abstract interface for decoders: external-&gt;elements Encoders &ndash; abstract interface for decoders: elements-&gt;external TypeRegistry &ndash; used to help look up the right TypeDescriptor ErrorDetails &ndash; helps explain what went wrong</p>
<p>Library/ltkcpp_connection.cpp Library/ltkcpp_connection.h Implements a simple transaction interface for conveying messages to/from a remote reader. It does not try to be all things to all people. Rather it is an important reference to aid developers of application-specific transaction layers.</p>
<p>Library/ltkcpp_element.cpp Subroutines for elements (parameters and messages)</p>
<p>Library/ltkcpp_encdec.cpp Subroutines for encoders and decoders</p>
<p>Library/ltkcpp_error.cpp Subroutines for ErrorDetails</p>
<p>Library/ltkcpp_framedecode.cpp Frame decoder, translates "LLRP Binary" into element trees. Conforms, of course, the Decoder abstract definition (see <a class="el" href="ltkcpp__base_8h.html" title="Based type descriptions for the LTKCPP library. ">ltkcpp_base.h</a>)</p>
<p>Library/ltkcpp_frameencode.cpp Frame encoder, translates element trees into "LLRP Binary". Conforms, of course, the Encoder abstract definition (see <a class="el" href="ltkcpp__base_8h.html" title="Based type descriptions for the LTKCPP library. ">ltkcpp_base.h</a>)</p>
<p>Library/ltkcpp_frameextract.cpp Used to identify and extract a single "LLRP Binary" frame from a byte buffer. <a class="el" href="namespaceLLRP.html">LLRP</a> frames can be coallesced in a network socket. This does the first level interpretation of the bytes so that the frames can be individually processed.</p>
<p>Library/ltkcpp_frame.h Declarations for ltkcpp_frame*.cpp</p>
<p>Library/ltkcpp_gen_cpp.xslt XSLT code generator for C++ definitions. This is where the generated encode/decode/etc functions are. Used to process ../../Definition/Core/llrp-1x0-def.xml into a transient file named out_ltkcpp.inc. Similarly used to process extension definitions. Requires xsltproc(1)</p>
<p>Library/ltkcpp_gen_h.xslt XSLT code generator for C++ declarations (class declarations). This is where the structs are defined for each message and parameter. Used to process ../../Definition/Core/llrp-1x0-def.xml into a transient file named out_ltkcpp.h. Similarly used to process extension definitions. Requires xsltproc(1)</p>
<p>Library/ltkcpp_genout.cpp Wrapper that combines platform headers, LTKCPP base headers, and the generated out_ltkcpp.inc. After the code generation this file is ready to compile.</p>
<p>Library/ltkcpp.h API C header file. This is the one applications #include. It #includes out_ltkcpp.h along with platform and LTKCPP header files.</p>
<p>Library/ltkcpp_hdrfd.cpp Contains FieldDescriptors (see <a class="el" href="ltkcpp__base_8h.html" title="Based type descriptions for the LTKCPP library. ">ltkcpp_base.h</a>) for message and parameter header fields.</p>
<p>Library/ltkcpp_platform.h Header file that #includes the right files for the current platform. It uses #ifdef linux, etc. This is where basic typedefs, like llrp_u32_t, are done.</p>
<p>Library/ltkcpp_typeregistry.cpp A type registry is a collection of pointers to type descriptors. During decode, a decoder might ask a type registry to find the type descriptor for message type number 123.</p>
<p>Library/ltkc_xmltextencode.c XML text encoder, translates element trees into XML text. It is essentially a pretty-printer. Conforms, of course, the Encoder abstract definition (see ltkc_base.h) The output is a string saved to a caller supplied buffer. It is mostly a trouble-shooting aid.</p>
<p>Library/ltkc_xmltext.h Declarations for ltkc_xmltext*.c</p>
<p>Library/Makefile Makefile for the library.</p>
<p>Makefile Top-level makefile. Builds the library, tests, and examples.</p>
<p>README.TXT This file that you are reading.</p>
<p>Release/ Directory where binary distributions are built</p>
<p>Release/Makefile Makefile to build binary distributions</p>
<p>Release/oem/ generated This directory is created and populated with the standard <a class="el" href="namespaceLLRP.html">LLRP</a> library and headers plus the general Impinj extension headers and library.</p>
<p>Release/std/ generated This directory is created and populated with the standard <a class="el" href="namespaceLLRP.html">LLRP</a> library and headers.</p>
<p>Release/tcs/ generated This directory is created and populated with the standard <a class="el" href="namespaceLLRP.html">LLRP</a> library and headers plus the general Impinj extension headers and library plus the internal Impinj extension headers and library</p>
<p>Tests/ Directory of test programs.</p>
<p>Tests/dx10?.cpp All dx10?.cpp (dx101, dx102, etc) are stand-alone tests of the library. No reader is required.</p>
<p>Tests/dx101.cpp Reads a file containing <a class="el" href="namespaceLLRP.html">LLRP</a> binary frames. For each frame:</p><ul>
<li>Decode it into an element tree</li>
<li>Encode it into XML text</li>
<li>Encode it into an <a class="el" href="namespaceLLRP.html">LLRP</a> frame</li>
<li>Compare the original input frame to the one produced by the encoder</li>
<li>Destruct the element tree. It is used as a regression to make sure things work consistently and to verify there are no memory leaks. Runs from the command line (not a GUI).</li>
</ul>
<p>Tests/dx20?.cpp All dx20?.cpp (dx201, dx202, etc) are tests of the library that require a reader to talk to.</p>
<p>Tests/dx201.cpp Does a simple inventory operation with some bells and whistles. It also does extra queries. Along with the basic library this exercises the ltkcpp_connection.[ch] transaction layer. Runs from the command line (not a GUI).</p>
<p>Tests/Makefile Makefile for the test programs.</p>
<p>Tests/RUN101 A shell script that runs dx101 with certain inputs and validation tools. Reports PASS/FAIL.</p>
<p>Tests/RUN201 A shell script that runs dx201 with certain validation and measurement tools. Used to characterize CPU and memory utilization.</p>
<p>VS_LTKCPP/ Visual Studio directory. The projects here reference the source files above. General options for all projects:</p><ul>
<li>Precompiled headers are turned off.</li>
<li>Code generation uses Multi-threaded DLL and Multi-threaded Debug DLL</li>
<li>For the three console applications, .... added as include dir</li>
<li>For dx201 and example1, added Ws2_32.lib to linker input</li>
</ul>
<p>VS_LTKCPP/dx101/ VS_LTKCPP/dx101/dx101.vcproj Builds dx101 (see above)</p>
<p>VS_LTKCPP/dx201/ VS_LTKCPP/dx201/dx201.vcproj Builds dx201 (see above)</p>
<p>VS_LTKCPP/example1/ VS_LTKCPP/example1/example1.vcproj Builds example1 (see above)</p>
<p>VS_LTKCPP/libltkcpp/ VS_LTKCPP/litltkcpp/libltkcpp.vcproj Builds libraries for base LTKCPP library including the core protocol support. The libraries are Debug/libltkcpp_d.lib and Release/libltkcpp_r.lib. Warning level reduced to 2 for ltkcpp_genout.cpp.</p>
<p>VS_LTKCPP/libltkcppimpinj VS_LTKCPP/libltkcppimpinj/libltkcppimpinj.vcproj Builds libraries for the Impinj general extensions. The libraries are Debug/libltkcppimpinj_d.lib and Release/libltkcppimpinj_r.lib. Warning level reduced to 2 for impinj_ltkcpp_genout.cpp.</p>
<p>VS_LTKCPP/libltkcppimpinjinternal VS_LTKCPP/libltkcppimpinjinternal/libltkcppimpinjinternal.vcproj Builds libraries for the Impinj internal extensions. The libraries are Debug/libltkcppimpinjinternal_d.lib and Release/libltkcppimpinjinternal_r.lib. Warning level reduced to 2 for impinjinternal_ltkcpp_genout.cpp.</p>
<p>VS_LTKCPP/libltkcppllrporg VS_LTKCPP/libltkcppllrporg/libltkcppllrporg.vcproj Builds libraries for the LLRP.org example extension. The libraries are Debug/libltkcppllrporg_d.lib and Release/libltkcppllrporg_r.lib. Warning level reduced to 2 for llrporg_ltkcpp_genout.cpp. This is an example and doesn't really do anything nor is it used by anything.</p>
<p>VS_LTKCPP/Makefile Makefile to support the top-level Makefile 'clean' target. Also has target 'fugazi' that create (touch(1)) the library files so that Release/Makefile can be tested.</p>
<p>VS_LTKCPP/VS_LTKCPP.ncb VS_LTKCPP/VS_LTKCPP.sln VS_LTKCPP/VS_LTKCPP.suo Visual studio config files. Probably only the .sln is important.</p>
<h1>TODO LIST </h1>
<ul>
<li>Need to settle question of formatting whether u1 fields are implictly boolean or not</li>
<li>Need to finish comments, especially <a class="el" href="ltkcpp__base_8h.html" title="Based type descriptions for the LTKCPP library. ">ltkcpp_base.h</a></li>
<li>Need a decoder for XML text (XML text -&gt; element tree)</li>
<li>MAYBE: Need encoder and decoder for XML DOM trees</li>
<li>Need a test for accessors (dx102)</li>
<li>Need a test for XML encode/decode (dx103) (needs XML encode/decode first)</li>
<li>On Windows, need a way to compare the dx101 output to the golden file</li>
<li>Windows prior to WinXP does not have getaddrinfo(). Probably should step back to gethostbyname()</li>
<li>Need to test on more versions of Visual Studio </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
